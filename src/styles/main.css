body {
    background-image: url("/assets/bg_v4-85.jpg"), var(--factorio-bg-fallback);
}

/* Make all icons in tree and rich text consistent size */
.blueprint-tree img {
    width: 24px;
    height: 24px;
}

.blueprint-tree-row:hover {
    background-color: #414040;
}

.factorio-icon {
    width: 32px;
    height: 32px;
    display: inline-block;
    vertical-align: middle;
}

.placeholder {
    width: 32px;
    height: 32px;
    object-fit: contain;
}

/* Icon group container */
.factorio-icon-group {
    position: relative;
    display: inline-block;
}

/* Quality overlay when inside a group */
.factorio-icon-group img.quality {
    position: absolute;
    left: 0;
    bottom: 0;
    width: 66%;
    height: 66%;
}

/* Tree specific contextual styles */
.tree-row {
    margin-right: 4px;
    border-radius: 4px;
    transition: background-color 0.15s ease;
    padding: 2px 0;
}

.tree-row:hover {
    background-color: #e39827;
    box-shadow: inset 0px 9px 2px -8px #fff,
    inset 0px 8px 4px -8px #000,
    inset 0px -8px 4px -8px #000,
    inset 0px -9px 2px -8px #432400,
    0px 0px 4px 0px #000,
    inset 0px 0px 4px 2px #f9b44b;
}

.tree-row.selected {
    background-color: #f1be64;
    box-shadow: inset 0px 10px 2px -8px #000,
    inset 0px 9px 2px -8px #000,
    inset 8px 0px 4px -8px #563a10,
    inset -8px 0px 4px -8px #563a10,
    inset 0px 9px 2px -8px #563a10,
    inset 0px -9px 2px -8px #563a10,
    inset 0px -8.5px 0px -8px #563a10,
    0px 0px 4px 0px #000;
}

.tree-row.active {
    background-color: rgba(94, 182, 99, 0.4);
    box-shadow: inset 0px 10px 2px -8px #000,
    inset 0px 9px 2px -8px #000,
    inset 8px 0px 4px -8px darkgreen,
    inset -8px 0px 4px -8px darkgreen,
    inset 0px 9px 2px -8px darkgreen,
    inset 0px -9px 2px -8px darkgreen,
    inset 0px -8.5px 0px -8px darkgreen,
    0px 0px 4px 0px #000;
}

.blueprint-tree .separator {
    width: 1px;
    height: 24px;
    background-color: #666;
    margin: 0 8px;
}

.blueprint-tree .label {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    flex: 1;
}

.blueprint-tree img.factorio-icon {
    width: 24px;
    height: 24px;
}

.blueprint-tree .placeholder {
    width: 24px;
    height: 24px;
}

/* Container styles */
.spreadsheet-container {
    border: 0;
    background-color: #313031;
    box-shadow: inset 0px 2px 2px -1px #000,
    inset 0px 0px 2px 0px #181616,
    inset 0px -2px 2px -2px #fff,
    0px 0px 2px 0px #2b2b2b;
    margin: 4px;
    padding: 2px;
    height: 100%; /* Fill available height */
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
}

/* Row styles */
.spreadsheet-row {
    display: flex;
    width: 100%;
    min-height: 40px;
}

/* Cell styles */
.spreadsheet-cell {
    padding: 8px;
    background-color: #414040;
    box-shadow: inset 0px 0px 4px 0px #2d2d2d,
    0px -2px 2px -1px #888,
    -2px 0px 2px -2px #000,
    2px 0px 2px -2px #000,
    0px 2px 2px -2px #000;
    display: flex;
    align-items: center;
    flex: 1;
}

/* Fixed-width cells */
.spreadsheet-cell-fixed {
    flex: 0 0 auto; /* Don't grow or shrink */
}

/* Icon container styles */
.spreadsheet-icon-container {
    display: flex;
    align-items: center;
    gap: 8px;
}

/* Multiple icon wrapper */
.spreadsheet-multi-icon {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 8px;
}

.spreadsheet-cell .spreadsheet-container {
    width: 100%;
    margin: 0;
    padding: 0;
}

.spreadsheet-cell:has(> .spreadsheet-container) {
    margin: 0;
    padding: 0;
}
